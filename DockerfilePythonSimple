FROM ubuntu:focal

RUN apt-get update
RUN apt-get install -y unzip
RUN apt-get install -y python3-dev python3-pip
RUN apt-get install -y libcapnp-dev wget

RUN cd /usr/include/capnp &&\
    wget https://raw.githubusercontent.com/capnproto/capnproto-java/ad460a4723363885461d00d02183270038fb7b38/compiler/src/main/schema/capnp/java.capnp

RUN pip3 install pycapnp==1.0.0b2

COPY dependencies/automata-safa-capnp-master.zip ./
RUN unzip automata-safa-capnp-master.zip &&\
    cd automata-safa-capnp-master &&\
    pip3 install .

COPY main.py ./
COPY example/5 /root/example5.sepafa

CMD python3 main.py /root/example5.sepafa
